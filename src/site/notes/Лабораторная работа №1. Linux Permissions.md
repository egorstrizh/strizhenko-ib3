---
{"dg-publish":true,"permalink":"/laboratornaya-rabota-1-linux-permissions/","tags":["gardenEntry"],"dgShowFileTree":true}
---

# Лабораторная работа №1. Linux Permissions
***
ФИО: 2022-ФГиИБ-ИБ-1б Стриженко Егор Романович
***
# 1. Создание пользователей
### 1.1. Создать 3 новых пользователя (user1, user2, user3). Создать для них домашние директории и установить shell оболочку по умолчанию (/bin/sh).

![1.1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/1.1.png)

### 1.2. Проверить, что пользователи и домашние директории были созданы. Проверить группы, которым принадлежат пользователи.

![1.2.1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/1.2.1.png)

В результате просмотра файла /etc/passwd было выявлено, что пользователи и домашние каталоги были созданы корректно.

![1.2.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/1.2.2.png)

Для созданных пользователей были установлены группы с GID, где для user1 был присвоен 1001, user2 - 1002, user3 - 1003.

### 1.3. Просмотреть файл /etc/shadow, объяснить его структуру.

![1.3.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/1.3.png)

Структура файла /etc/shadow: 
1. Имя пользователя; 
2. Хешированный пароль пользователя; 
3. Последнее изменения пароля. Это дата последнего изменения пароля. Количество дней исчисляется с 1 января 1970 года (дата эпохи); 
4. Минимальный срок действия пароля (если 0 - отсутствие минимального срока действия пароля); 
5. Максимальный срок действия пароля; 
6. Период предупреждения. Количество дней до истечения срока действия пароля, в течение которого пользователь получает предупреждение о необходимости изменения пароля; 
7. Период бездействия. Количество дней после истечения срока действия пароля пользователя до отключения учетной записи пользователя; 
8. Срок хранения. Дата, когда учетная запись была отключена; 
9. Это поле игнорируется. Оно зарезервировано для будущего использования. 

Обратим внимание на хешированный пароль. В начале каждого хешированного пароля указан префикс $6, благодаря чему мы можем определить алгоритм шифрования - SHA 512. Это самый простой способ.

### 1.4. Создайте новую группу, которая будет включать двух из трех пользователей (user1, user2). Удалите группы тех пользователей, которых вы объединили (user1, user2).

![1.4.1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/1.4.1.png)

![1.4.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/1.4.2.png)

# 2. Разрешения

### 2.1. Авторизуйтесь под первым пользователем (user1). Создайте файл в домашней директории пользователя, проверьте разрешения по умолчанию.

![Скриншоты №2/2.1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.1.png)

### 2.2. Измените права таким образом, чтобы пользователь той же группы (user2) мог редактировать файл, а отдельный (user3) - не мог видеть и редактировать.

![Скриншоты №2/2.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.2.png)

### 2.3. Измените права на файл таким образом, чтобы владелец (user1) и отдельный пользователь (user3) могли читать и редактировать файл, а второй пользователь (user2) - нет.

![Скриншоты №2/2.3.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.3.png)

### 2.4. Создайте директорию, поместите в нее несколько файлов. Повторите шаг 2.2 и 2.3 для директории и файлов внутри нее.

![2.4.1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/2.4.1.png)

![2.4.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/2.4.2.png)

![2.4.3.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/2.4.3.png)

Повторяем шаги, аналогичные пункту 2.2. Проверяем, что пользователи user1 и user2 могут читать и изменять содержимое директории и файлов внутри нее, тогда как user3 не должна иметь такой возможности.

![2.4.4.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/2.4.4.png)

### 2.5. Создайте скрипт на ЯП Python с расширением .py. Задайте ему шебанг. Попробуйте запустить скрипт самостоятельно, без вызова интерпретатора.

![Скриншоты №2/2.5.1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.5.1.png)
![Скриншоты №2/2.5.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.5.2.png)

# 3. Специальные разрешения

### 3.1. Что делает следующая команда?

`chmod 4762 filename` 
Команда chmod 4762 filename изменяет права доступа к файлу filename 
4 - установлен SetUID, когда файл выполняется, он будет выполняться с правами владельца файла, а не с правами пользователя, который его запустил; 
7 - владелец файла имеет полные права на чтение (r), запись (w) и выполнение (x) файла; 
6 - что группа файла имеет права на чтение ( r ) и запись ( w ), но не имеет прав на выполнение файла (х); 2 - все остальные пользователи имеют только право на запись файла (w) .

### 3.2. Зайдите под первым пользователем (user1) и создайте директорию (например, dir1), внутрь поместите несколько исполняемых скриптов с расширением \*.py. Для этой директории рекурсивно установите UID, GID и Sticky Bit. Дайте скриптам права на исполнение

![3.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/3.2.png)

### 3.3. Удалите права на исполнения для всего в домашней директории.

![3.3.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/3.3.png)

### 3.4. Установите для созданной директории (dir1) права таким образом, чтобы пользователи из других групп могли осуществлять навигацию и читать файлы внутри.

![3.4.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/3.4.png)

### 3.5. Авторизуйтесь в системе под вторым пользователем (user2) и создайте директорию {user2}\_share. Установите разрешения таким образом, чтобы второй пользователь мог делиться файлами с первым (user1) и отдельным (user3).

![3.5.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/3.5.png)

### 3.6. Создайте файл sensetive_data от имени второго пользователя (user2) и запишите в него какую-либо текстовую информацию. Уберите разрешения для группы и всех остальных.

![3.6.1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/3.6.1.png)

Ограничим полностью доступ к данному файлу для других пользователей.

![3.6.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/3.6.2.png)

Теперь, если попробовать открыть файл от имени другого пользователя, например, user3, доступ будет запрещен, потому что этому пользователю не предоставлено право на чтение.

![3.6.3.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/3.6.3.png)

Если я открою файл sensitive_data с помощью vi, я не увижу содержимого, а попытка внести туда изменения завершится сообщением "Отказано в доступе". Это происходит потому, что я не предоставил другим пользователям разрешения на запись в этот файл.

![3.6.4.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/3.6.4.png)

![3.6.5.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/3.6.5.png)

![3.6.6.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/3.6.6.png)

![3.6.7.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%961/3.6.7.png)




