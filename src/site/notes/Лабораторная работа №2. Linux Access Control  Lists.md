---
{"dg-publish":true,"permalink":"/laboratornaya-rabota-2-linux-access-control-lists/","dgShowFileTree":true}
---

# Лабораторная работа №2. Linux Access Control Lists
***
ФИО: 2022-ФГиИБ-ИБ-1б Стриженко Егор Романович
***
# 0. Реализация ситуации 

Пусть у нас в системе существуют следующие пользователи: 
- student01; 
- student02; 
- student03; 
- tudent04;
- student05;
- student06; 
Создание пользователей:

![0.1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/0.1.png)

Создание группы для системных администраторов student01 и student02 
Добавляем созданных пользователей в общую группу.

![0.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/0.2.png)

Изменение прав.

![0.3.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/0.3.png)

Создание файла от имени student03. 

![0.4.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/0.4.png)

# 1.Установка acl

![1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/1.png)

# 2. Практика 
### 2.1. Изучите с помощью getfacl права файла student03.script.sh.

![Скриншоты №2/2.1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.1.png)

### 2.2. С помощью setfacl предоставьте пользователь student04 права на чтение и запись скрипты student03.script.sh.

![Скриншоты №2/2.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.2.png)

### 2.3. В дополнение к трем пользователям из ЛР01, создайте еще двух пользователей (user4, user5). Затем создайте еще одну группу (напр. group2) и поместите в нее новых пользователей (user4, user5).

![Скриншоты №2/2.3.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.3.png)

### 2.4. Внутри директории пользователя user5 создайте от его имени директорию important_files.

![2.4.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.4.png)

Есть ли разница между выводом ls -l и getfacl? 
ls -l покажет стандартные атрибуты директории important_files, включая права доступа. 
Команда getfacl покажет дополнительные атрибуты доступа, такие как ACL, если они применены к этой директории.

### 2.5. Зайдите под четвертым (user4) (относительно пользователей из ЛР01) и выполните следующие действия:

Попытайтесь добавить новую директорию внутри important_files. Можете ли вы это сделать? Почему?

![Скриншоты №2/2.5.1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.5.1.png)

У пользователя user4 нет прав на запись в директории пятого пользователя. 
Добавьте новое ACL правило для директории important_files такое, чтобы четвертый пользователь (user4) имел права rwx.

![Скриншоты №2/2.5.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.5.2.png)

Есть ли разница между выводом ls -l и getfacl для important_files? Почему?

![2.5.3.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.5.3.png)

ls -l покажет только стандартные атрибуты директории, включая права доступа. getfacl покажет дополнительные атрибуты доступа, такие как ACL, если они установлены. 
Попытайтесь добавить новую директорию снова от имени четвертого пользователя (user4) внутри important_files. Можете ли вы это сделать? Почему?

![2.5.4 1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.5.4%201.png)

После добавления правил user4 сможет создать новую директорию внутри important_files, потому что теперь у него есть права на запись в эту директорию.

### 2.6. Авторизуйтесь под именем пятого пользователя (user5) и выполните следующие действия: 

Попытайтесь создать какой-нибудь файл внутри директории четвертого пользователя из предыдущего шага. Можете ли вы это сделать? Почему?

![2.6.1 1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.6.1%201.png)

Пользователь user5 не имеет права на запись в директории. 
Добавьте новое ACL правило для директории important_files такое, чтобы группа из четвертого и пятого пользователя (group2) имела права rwx.

![2.6.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.6.2.png)

Попытайтесь создать какой-нибудь файл внутри директории четвертого пользователя из предыдущего шага. Можете ли вы это сделать? Почему?

![2.6.3.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.6.3.png)

Файл создать нельзя. Для DIR_DY права не изменились. Чтобы group2 могли создавать внутри директории файлы нужны права rwx на эту директорию, а не директорию выше.

# 2.7. Снова авторизуйтесь под именем четвертого пользователя (user4) и создайте какой либо файл в своей директории внутри important_files. Выполните следующие действия:

![2.7.1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.7.1.png)

Авторизуйтесь под пятым пользователем (user5). Можете ли вы отредактировать созданный файл? Почему?

![2.7.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.7.2.png)

user5 не сможет отредактировать файл, поскольку у него нет прав на запись в этот файл. 
Добавьте новое ACL правило, которое разрешало бы пользователям второй группы (group2) редактировать любые файлы внутри директории четвертого пользователя (user4) внутри important_files.

![2.7.3.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.7.3.png)

Снова от имени четвертого пользователя (user4) создайте в описываемой директории новый файл.

![2.7.4.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.7.4.png)

Может ли теперь пятый пользователь (user5) редактировать эти файлы? Какие? Почему?

![2.7.5.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.7.5.png)

![2.7.6.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.7.6.png)

### 2.8. Покажите все созданные вами правила для второй группы (group2, внутри которой четвертый и пятый пользователи). Затем, удалите все эти правила.

![2.8.1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.8.1.png)

![2.8.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.8.2.png)

### 2.9. Авторизуйтесь по четвертым пользователем (user4). Создайте третий файл внутри своей директории внутри important_files.

![2.9.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.9.png)

### 2.10. Может ли теперь пятый пользователь (user5) редактировать файлы внутри директории четвертого пользователя? Какие? Почему?

![2.10.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.10.png)

### 2.11. Удалите все ACL правила для директории четвертого пользователя, затем повторите предыдущий шаг. Что изменилось? Почему?
![2.11.1.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.11.1.png)

Права на редактирование удалены у всех файлов.

![2.11.2.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B%20%E2%84%962/2.11.2.png)


