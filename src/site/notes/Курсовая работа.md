---
{"dg-publish":true,"permalink":"/kursovaya-rabota/","dgShowFileTree":true}
---

# **Курсовая работа**
#### По дисциплине: «Программно-аппаратные средства защиты информации»
## Тема: «Duplicity – резервное копирование с шифрованием»
***
ФИО: 2022-ФГиИБ-ИБ-1б Стриженко Егор Романович
***
# **ЦЕЛЬ И ЗАДАЧИ**

### **Цель работы:**

Разобраться, насколько хорошо программа Duplicity делает резервные копии: надежно ли она сохраняет данные, защищает ли их шифрованием и экономит ли место благодаря копированию.

### **Задачи работы:**

1. Установить Duplicity на Ubuntu через Oracle VirtualBox.
2. Изучить принцип работы Duplicity: как она устроена и какие технологии использует.
3. Проанализировать механизм шифрования: как именно Duplicity использует GnuPG (GPG) для защиты данных при передаче и хранении.
4. Изучить копирование: как Duplicity экономит место и время, копируя только изменения.
5. Сравнить Duplicity с другими похожими программами и понять, чем она лучше или хуже.
6. Проверить работу Duplicity на практике: установить, настроить, сделать копии, восстановить файлы и посмотреть, удобно ли ей пользоваться и как быстро она работает.
7. Систематизировать выявленные преимущества и недостатки: определить, насколько Duplicity удобна и надежна именно для защищенного шифрованием резервного копирования.
8. Сделать выводы: понять, в каких ситуациях Duplicity — лучший выбор для безопасного резервирования данных.

# **ВВЕДЕНИЕ**

В современном мире, где всё больше процессов происходит в цифровом формате, обеспечение сохранности и конфиденциальности данных становится критически важным как для частных пользователей, так и для организаций. Потеря информации из-за технических сбоев, кибератак или человеческих ошибок, а также несанкционированный доступ к резервным копиям могут привести к серьёзным последствиям.
Чтобы избежать таких проблем, необходимо обеспечить эффективное резервное копирование. Оно должно не только гарантировать восстановление данных, но и обеспечивать максимальную защиту на всех этапах — при передаче и хранении.
В этом контексте особую важность приобретают решения, которые сочетают в себе инкрементальное копирование и строгое сквозное шифрование. Такие решения позволяют обеспечить надёжную защиту данных и минимизировать риски потери информации.

# **ТЕОРЕТИЧЕСКИЙ РАЗДЕЛ**

### **1.1. Роль Duplicity в защите информации**

Duplicity — это инструмент для создания надёжных резервных копий, который помогает защитить важные данные от различных рисков, связанных с потерей или кражей информации. Вот ключевые моменты, которые демонстрируют важность Duplicity:

- Инкрементальные копии экономят пространство, сохраняя только изменения относительно предыдущих версий.
- Шифрование всех резервных копий осуществляется с использованием мощных криптографических инструментов, таких как GNU Privacy Guard (GPG).
- Автоматизация резервного копирования, настраиваемая по расписанию, повышает устойчивость инфраструктуры.
- Широкий спектр поддерживаемых сервисов обеспечивает совместимость с различными протоколами передачи данных и сервисами хранения, делая Duplicity универсальным решением.

### **1.2. Основные угрозы информационной безопасности**

Несмотря на существование такого инструмента, как Duplicity, пользователи и организации всё ещё сталкиваются с рядом значительных рисков, включая:
- Хакерские атаки, включающие кражу конфиденциальных данных через фишинг, взлом баз данных и другие виды сетевых атак.
- Утрата оборудования с важными данными без надлежащей защиты, способная нанести существенный финансовый и репутационный ущерб.
- Ненадлежащее управление правами доступа, когда недостаточный контроль над доступом сотрудников или третьих лиц приводит к нежелательной передаче информации.
- Технические сбои, такие как отказ оборудования или повреждение жестких дисков, уничтожающие ценную информацию.
- Программные ошибки в устаревших версиях приложений или системах управления, становящиеся причиной утечек данных.

### **1.3. Как Duplicity решает проблему?**

Применяя такие инструменты, как Duplicity, организации и частные лица могут значительно уменьшить вероятность потери данных. Вот конкретные действия, которые помогут повысить уровень безопасности:

- Регулярные обновления инструментария позволяют поддерживать совместимость с современными методами шифрования.
- Настройка автоматизированных процессов резервного копирования сокращает человеческие ошибки и упрощает восстановление данных.
- Применение механизмов контроля доступа и мониторинга активности помогает выявлять потенциальные проблемы до наступления критических ситуаций.

# **АНАЛИТИЧЕСКИЙ РАЗДЕЛ**

### **2.1. Сравнительный анализ**

Сравнения производительности и эффективности хранения данных 4 инструментов резервного копирования: Duplicacy, restic, Attic и duplicity — с использованием общедоступных наборов данных.

|                      | Duplicacy | restic         | Attic              | duplicity      |
| -------------------- | --------- | -------------- | ------------------ | -------------- |
| Версия               | 2.0.3     | 0.6.1          | BorgBackup 1.1.0b6 | 0.7.12         |
| Средний размер куска | 1МБ       | 1МБ            | 2МБ                | 25МБ           |
| Хэш                  | blake2    | SHA256         | blake2             | SHA1           |
| Сжатие               | lz4       | не реализовано | lz4                | zlib уровень 1 |
| Шифрование           | AES-GCM   | AES-CTR        | AES-CTR            | GnuPG          |

#### **2.1.1. Резервное копирование базы кода Linux**

Все резервные копии сохранялись в каталоге хранилища на том же жёстком диске, что и кодовая база, чтобы исключить различия в производительности, вызванные разной реализацией сетевых или облачных хранилищ.

Вот сколько времени (в секундах) прошло в реальном времени, как сообщает команда time, с указанием времени работы пользовательского и системного процессоров в скобках:

|                                      | Duplicacy        | restic           | Attic            | duplicity        |
| ------------------------------------ | ---------------- | ---------------- | ---------------- | ---------------- |
| Первоначальное резервное копирование | 13.7 (16.9, 1.6) | 20.7 (69.9, 9.9) | 26.9 (23.1, 3.1) | 44.2 (56.3, 4.6) |
| 2 - я резервная копия                | 4.8 (4.8, 0.5)   | 8.0 (15.3, 2.5)  | 15.4 (13.4, 1.5) | 19.5 (17.9, 1.1) |
| 3 - я резервная копия                | 6.9 (8.0, 1.0)   | 11.9 (32.2, 4.0) | 19.6 (16.4, 2.0) | 29.8 (29.3, 1.9) |
| 4 - я резервная копия                | 3.3 (3.1, 0.4)   | 7.0 (12.7, 2.2)  | 13.7 (12.1, 1.2) | 18.6 (17.3, 0.9) |
| 5 - я резервная копия                | 9.9 (11.0, 1.0)  | 11.4 (33.5, 3.8) | 19.9 (17.1, 2.1) | 28.0 (27.6, 1.5) |
| 6 - я резервная копия                | 3.8 (3.9, 0.5)   | 8.0 (17.7, 2.7)  | 16.8 (14.1, 1.6) | 22.0 (20.7, 1.0) |
| 7 - я резервная копия                | 5.1 (5.1, 0.5)   | 7.8 (16.0, 2.4)  | 14.3 (12.6, 1.3) | 21.6 (20.3, 1.0) |
| 8 - я резервная копия                | 9.5 (10.8, 1.1)  | 13.5 (49.3, 4.8) | 18.3 (15.9, 1.8) | 35.0 (33.6, 1.9) |
| 9 - я резервная копия                | 4.3 (4.5, 0.6)   | 9.0 (20.6, 2.8)  | 15.7 (13.7, 1.5) | 24.9 (23.6, 1.1) |
| 10 - я резервная копия               | 7.9 (9.1, 0.9)   | 20.2 (38.4, 4.7) | 32.2 (18.1, 2.3) | 35.0 (33.8, 1.8) |
| 11 - я резервная копия               | 4.6 (4.5, 0.6)   | 9.1 (19.6, 2.8)  | 16.8 (14.5, 1.7) | 28.1 (26.4, 1.3) |
| 12 - я резервная копия               | 7.4 (8.8, 1.0)   | 12.0 (38.4, 4.0) | 21.7 (18.4, 2.2) | 37.4 (37.0, 2.0) |

Duplicacy, безусловно, стал явным лидером. Интересно, что restic, хотя и оказался вторым по скорости, требовал значительно больше процессорного времени, чем реального. Это неудобно для пользователей, которые хотят, чтобы резервное копирование происходило в фоновом режиме и не мешало другим задачам. Возможно, причина в том, что restic использует слишком много ресурсов.

Теперь давайте посмотрим на размеры резервного хранилища после каждого резервного копирования:

|                                      | Duplicacy | restic | Attic  | duplicity |
| ------------------------------------ | --------- | ------ | ------ | --------- |
| Первоначальное резервное копирование | 224 МБ    | 631 МБ | 259 МБ | 183       |
| 2 – я резервная копия                | 246 МБ    | 692 МБ | 280 МБ | 185 МБ    |
| 3 – я резервная копия                | 333 МБ    | 912 МБ | 367 МБ | 203 МБ    |
| 4 – я резервная копия                | 340 МБ    | 934 МБ | 373 МБ | 204 МБ    |
| 5 – я резервная копия                | 429 МБ    | 1.1 ГБ | 466 МБ | 222 МБ    |
| 6 – я резервная копия                | 457 МБ    | 1.2 ГБ | 492 МБ | 224 МБ    |
| 7 – я резервная копия                | 475 МБ    | 1.2 ГБ | 504 МБ | 227 МБ    |
| 8 – я резервная копия                | 576 МБ    | 1.5 ГБ | 607 МБ | 247 МБ    |
| 9 – я резервная копия                | 609 МБ    | 1.6 ГБ | 636 МБ | 251 МБ    |
| 10 – я резервная копия               | 706 МБ    | 1.8 ГБ | 739 МБ | 268 МБ    |
| 11 – я резервная копия               | 734 МБ    | 1.9 ГБ | 766 МБ | 270 МБ    |
| 12 – я резервная копия               | 834 МБ    | 2.2 ГБ | 869 МБ | 294 МБ    |

Несмотря на то, что Duplicity наиболее эффективно использует пространство для хранения, следует отметить, что она использует zlib, который, как известно, сжимает данные лучше, чем lz4, используемый Duplicacy и Attic. Кроме того, у Duplicity есть серьёзный недостаток в её инкрементной модели: пользователь должен решать, выполнять ли полное резервное копирование или инкрементное резервное копирование при каждом запуске. Это связано с тем, что, хотя инкрементное резервное копирование экономит много места для хранения, оно также зависит от предыдущих резервных копий из-за особенностей Duplicity, что делает невозможным удаление какой-либо одной резервной копии из длинной цепочки зависимых резервных копий. Таким образом, перед пользователями duplicity всегда стоит дилемма: как часто выполнять полное резервное копирование.

Запустив скрипт linux-restore-test.sh для проверки скорости восстановления, мы убедились, что перед каждым восстановлением целевой каталог очищается. Это позволило провести тест только на полное восстановление, исключив инкрементное. Duplicacy вновь показал себя не только самым быстрым, но и самым надежным решением.

Время восстановления в restic и Attic значительно увеличивалось для резервных копий, созданных позже, причём производительность restic снижалась гораздо быстрее. Возможно, это связано с тем, что и Restic, и Attic объединяют несколько фрагментов в пакет, поэтому для восстановления более поздней резервной копии может потребоваться распаковать множество пакетов, относящихся к более ранним резервным копиям. В отличие от этого, фрагменты в Duplicacy являются независимыми объектами и никогда не упаковываются, поэтому любую резервную копию можно быстро восстановить из фрагментов, составляющих эту резервную копию, без необходимости извлекать данные из других резервных копий.

|                       | Duplicacy         | restic             | Attic              | duplicity           |
| --------------------- | ----------------- | ------------------ | ------------------ | ------------------- |
| 1 – е восстановление  | 38.8 (18.4, 11.5) | 38.4 (17.3, 8.6)   | 81.5 (18.8, 12.5)  | 251.6 (133.4, 51.9) |
| 2 – е восстановление  | 35.2 (11.5, 12.9) | 92.7 (25.1, 12.6)  | 41.1 (17.0, 11.4)  | 256.6 (133.7, 48.4) |
| 3 – е восстановление  | 33.9 (9.7, 10.9)  | 136.7 (27.7, 15.0) | 35.3 (17.3, 11.5)  | 231.4 (134.5, 46.9) |
| 4 – е восстановление  | 34.5 (14.0, 10.8) | 149.7 (26.9, 15.1) | 46.4 (17.9, 12.5)  | 213.8 (134.5, 43.5) |
| 5 – е восстановление  | 30.2 (9.4, 9.4)   | 198.3 (28.6, 17.3) | 58.2 (18.9, 13.3)  | 236.4 (134.3, 49.2) |
| 6 – е восстановление  | 34.7 (11.2, 9.3)  | 348.6 (30.2, 20.8) | 65.5 (19.5, 13.4)  | 250.7 (135.3, 40.9) |
| 7 – е восстановление  | 36.8 (9.2, 9.6)   | 238.8 (29.3, 18.6) | 64.8 (19.4, 13.6)  | 225.7 (125.1, 42.7) |
| 8 – е восстановление  | 26.0 (9.7, 8.1)   | 251.5 (32.5, 21.7) | 83.1 (20.9, 14.3)  | 261.0 (126.0, 45.3) |
| 9 – е восстановление  | 31.5 (8.8, 8.7)   | 269.5 (31.0, 21.0) | 80.3 (20.5, 14.1)  | 230.6 (126.8, 43.0) |
| 10 – е восстановление | 40.5 (8.7, 8.1)   | 290.6 (32.0, 22.1) | 91.9 (21.5, 15.0)  | 242.4 (128.9, 46.3) |
| 11 – е восстановление | 34.6 (8.3, 7.6)   | 472.7 (33.0, 26.3) | 125.3 (22.3, 15.1) | 278.5 (127.9, 49.1) |
| 12 – е восстановление | 76.4 (20.4, 13.1) | 387.7 (33.4, 24.7) | 103.2 (23.1, 16.1) | 240.3 (134.9, 44.8) |

#### **2.1.2. Создание резервной копии виртуальной машины VirtualBox**

Второй тест был нацелен на другой конец спектра — набор данных с меньшим количеством, но гораздо более крупными файлами. Файлы виртуальных машин обычно попадают в эту категорию. Конкретный набор данных для этого теста — файл виртуальной машины VirtualBox.

В таблице указано время резервного копирования с помощью этих четырёх инструментов. При настройках по умолчанию Duplicacy в целом работает медленнее, чем Attic. Однако это связано главным образом с тем, что Attic не вычисляет хэши файлов, в отличие от Duplicacy. Для справедливого сравнения в Duplicacy была добавлена опция отключения вычисления хэшей файлов, благодаря чему Duplicacy работает немного быстрее, чем Attic. Это не значит, что Duplicacy должна использовать эту опцию по умолчанию. Хотя хэши блоков могут гарантировать целостность резервных копий, хэши файлов могут быть полезны во многих отношениях. Например, хэши файлов позволяют пользователям быстро определять, какие файлы в существующих резервных копиях были изменены. Они также позволяют сторонним инструментам сравнивать файлы на дисках с файлами в резервных копиях. Маловероятно, что Duplicacy перестанет вычислять хэши файлов по умолчанию в угоду небольшому повышению производительности.

Удивительно, но для третьей резервной копии Restic оказался самым быстрым. Отчасти это можно объяснить отсутствием сжатия, отчасти — высокой загрузкой процессора.

|                                      | Duplicacy (default settings) | Duplicacy (no file hash) | restic              | Attic            | duplicity           |
| ------------------------------------ | ---------------------------- | ------------------------ | ------------------- | ---------------- | ------------------- |
| Первоначальное резервное копирование | 80.6 (100.7, 3.3)            | 41.4 (57.7, 3.2)         | 136.5 (116.4, 13.7) | 47.6 (46.9, 4.9) | 255.6 (226.9, 18.5) |
| 2 – я резервная копия                | 49.4 (52.9, 2.0)             | 36.5 (40.8, 2.1)         | 32.2 (70.4, 4.8)    | 39.2 (34.2, 2.4) | 334.3 (343.4, 4.6)  |
| 3 – я резервная копия                | 45.7 (44.6, 1.4)             | 34.5 (33.1, 1.4)         | 17.3 (55.1, 2.2)    | 36.1 (31.8, 1.7) | 42.0 (35.3, 2.2)    |

Не стоит удивляться тому, что дублирование по-прежнему остаётся самым результативным методом сохранения информации, в то время как ограничение доступа к ней — наименее эффективным.

|                                      | Duplicacy | restic | Attic | duplicity |
| ------------------------------------ | --------- | ------ | ----- | --------- |
| Первоначальное резервное копирование | 2.0 Г     | 4.1 Г  | 2.0 Г | 1.7 Г     |
| 2 – я резервная копия                | 2.6 Г     | 5.0 Г  | 2.6 Г | 1.9 Г     |
| 3 – я резервная копия                | 2.6 Г     | 5.1 Г  | 2.7 Г | 1.9 Г     |

Для каждой резервной копии также было выполнено полное восстановление. Опять же, отсутствие вычисления хэша файла помогло повысить производительность, но при этом повысился риск возможного необнаруженного повреждения данных.

|                      | Duplicacy (настройки по умолчанию) | Duplicacy (без хеша файла) | restic            | Attic             | duplicity           |
| -------------------- | ---------------------------------- | -------------------------- | ----------------- | ----------------- | ------------------- |
| 1 – е восстановление | 130.5 (72.4, 5.7)                  | 76.8 (23.7, 4.2)           | 202.6 (52.1, 7.1) | 99.6 (30.9, 6.6)  | 728.3 (195.6, 87.0) |
| 2 – е восстановление | 138.9 (79.4, 5.4)                  | 121.5 (27.8, 6.6)          | 230.8 (59.5, 8.3) | 115.7 (35.6, 7.8) | 720.5 (191.2, 87.7) |
| 3 – е восстановление | 145.4 (73.2, 5.4)                  | 123.9 (27.7, 6.6)          | 244.8 (59.8, 8.1) | 122.2 (35.7, 7.9) | 749.7 (196.1, 87.9) |

# **ПРАКТИЧЕСКАЯ ЧАСТЬ**

### **3.1. Установка и настройка Duplicity**

#### **3.1.1. Установка необходимых пакетов:**

![Pasted image 20250619143325.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619143325.png)

![Pasted image 20250619143350.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619143350.png)

#### **3.1.2. Создание тестовой директории и файлов:**

![Pasted image 20250619144302.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619144302.png)

#### **3.2. Базовые операции резервного копирования**

#### **3.2.1. Создание резервной копии без шифрования:**

![Pasted image 20250619144410.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619144410.png)

#### **3.2.2. Восстановление данных:**

![Pasted image 20250619144705.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619144705.png)

#### **3.2.3. Восстановление конкретного файла:**

![Pasted image 20250619144745.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619144745.png)

### **3.1. Работа с шифрованием (GPG)**

#### **3.3.1. Генерация GPG-ключа:**

![Pasted image 20250619144950.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619144950.png)

#### **3.3.2. Создание зашифрованной резервной копии:**

![Pasted image 20250619145028.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619145028.png)

#### **3.3.3. Восстановление из зашифрованной копии:**

![Pasted image 20250619145101.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619145101.png)

### **3.4. Управление резервными копиями**

#### **3.4.1. Инкрементное копирование (только изменения):**

![Pasted image 20250619145224.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619145224.png)

#### **3.4.2. Принудительное полное копирование:**

![Pasted image 20250619145300.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619145300.png)

#### **3.4.3. Просмотр списка резервных копий:**

![Pasted image 20250619145353.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619145353.png)

#### **3.4.4. Удаление старых копий:**

![Pasted image 20250619145450.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619145450.png)

### **3.5. Дополнительные настройки**

#### **3.5.1. Исключение файлов по расширению (например, .md):**

![Pasted image 20250619145602.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619145602.png)

#### **3.5.2. Изменение размера томов (разбивка на части по 5 МБ):**

![Pasted image 20250619145639.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619145639.png)

#### **3.5.3. Проверка целостности резервной копии:**

![Pasted image 20250619145735.png](/img/user/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D1%8B/Pasted%20image%2020250619145735.png)

# **ЗАКЛЮЧЕНИЕ**

Duplicity доказала свою эффективность как инструмент для защищенного резервного копирования, сочетающий гибкость, надежность и открытость. В ходе исследования были выявлены ключевые аспекты:

### **Преимущества:**

1. Сквозное шифрование через GPG гарантирует конфиденциальность данных при хранении и передаче.
2. Инкрементальное копирование.
3. Поддержка множества протоколов.
4. Открытый код позволяет аудитировать безопасность и адаптировать решение под специфические задачи.

### **Недостатки:**

1. Сложность настройки для новичков из-за отсутствия GUI.
2. Зависимость инкрементальных копий: удаление одной копии может нарушить цепочку восстановления.
3. Высокие требования к ресурсам при шифровании больших объемов данных.
4. Ограниченная скорость восстановления.

### **Итог:**

Duplicity остается оптимальным выбором для организаций, где безопасность превалирует над производительностью. Её открытая архитектура и интеграция со стандартами шифрования делают инструмент будуще-устойчивым решением для защиты критических данных в эпоху квантовых вычислений.